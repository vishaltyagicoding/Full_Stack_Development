{% extends 'base.html' %}
{% block content %}
<h2>All Tasks</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Title</th><th>Description</th><th>Done</th><th>Created</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
      <tr>
        <td>{{ task.title }}</td>
        <td>{{ task.description|linebreaksbr }}</td>
        <td>
          <form method="post" action="{% url 'todo:task_toggle_complete' task.pk %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm {% if task.completed %}btn-success{% else %}btn-outline-secondary{% endif %}">
              {% if task.completed %}âœ”{% else %}Mark{% endif %}
            </button>
          </form>
        </td>
        <td>{{ task.created_at|date:"Y-m-d H:i" }}</td>
        <td>
          <a class="btn btn-sm btn-warning" href="{% url 'todo:task_update' task.pk %}">Edit</a>
          <a class="btn btn-sm btn-danger" href="{% url 'todo:task_delete' task.pk %}">Delete</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No tasks yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}